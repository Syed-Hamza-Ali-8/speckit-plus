# Tasks: Phase 3 Part 1 - Frontend Setup

**Input**: Design documents from `/specs/phase3/part1-frontend-setup/`
**Prerequisites**: spec.md, plan.md, research.md, data-model.md, quickstart.md
**Tests**: No tests requested for scaffolding phase (manual verification via checkpoints)

**Organization**: Tasks organized sequentially (project init → styling → state → routing → UI) as each phase depends on previous.

## Format: `[ID] [P?] Description`

- **[P]**: Can run in parallel (different files, no dependencies)
- Include exact file paths in descriptions
- Checkpoints verify each phase completion

## Path Conventions

- **Frontend**: `phase2/frontend/`
- **Source**: `phase2/frontend/src/`

---

## Phase 1: Project Initialization

**Purpose**: Create Vite + React + TypeScript project with environment setup

**Checkpoint**: `cd phase2/frontend && npm install && npm run dev` → localhost:5173

- [x] T001 Run `npm create vite@latest frontend -- --template react-ts` in `phase2/` directory
- [x] T002 Create `.env.local` with `VITE_API_URL=http://localhost:8000` in `phase2/frontend/`
- [x] T003 Create `.env.example` with `VITE_API_URL=` placeholder in `phase2/frontend/`
- [x] T004 Update `tsconfig.json` to add path alias `"@/*": ["./src/*"]` in `phase2/frontend/`
- [x] T005 Verify dev server starts with `npm run dev` → localhost:5173 renders default Vite page

**Deliverables**:
- Vite React-TS project scaffolded
- Environment variables configured
- TypeScript path aliases ready

---

## Phase 2: Tailwind CSS + shadcn/ui

**Purpose**: Install and configure Tailwind CSS with shadcn/ui component library

**Checkpoint**: `<Button>` component renders with Tailwind styling

- [x] T006 Install Tailwind CSS: `npm install -D tailwindcss postcss autoprefixer @tailwindcss/postcss` in `phase2/frontend/`
- [x] T007 Create `tailwind.config.ts` and `postcss.config.js` in `phase2/frontend/`
- [x] T008 Configure Tailwind v4 with `@theme` directive for CSS variables in `phase2/frontend/`
- [x] T009 Update `src/index.css` with Tailwind v4 `@import "tailwindcss"` directive in `phase2/frontend/`
- [x] T010 Set up shadcn/ui manually with utils.ts and components.json in `phase2/frontend/`
- [x] T011 Create shadcn/ui button component in `phase2/frontend/src/components/ui/button.tsx`
- [x] T012 [P] Create shadcn/ui card component in `phase2/frontend/src/components/ui/card.tsx`
- [x] T013 [P] Create shadcn/ui input component in `phase2/frontend/src/components/ui/input.tsx`
- [x] T014 [P] Create shadcn/ui label component in `phase2/frontend/src/components/ui/label.tsx`
- [x] T015 Install Lucide React icons: `npm install lucide-react` in `phase2/frontend/`
- [x] T016 Verify `<Button>` renders in `App.tsx` with proper styling

**Deliverables**:
- Tailwind CSS configured with dark mode support
- shadcn/ui initialized with base components
- Lucide React icons available
- `src/lib/utils.ts` with `cn()` helper (auto-generated by shadcn)

---

## Phase 3: RTK Query API Store

**Purpose**: Configure Redux Toolkit Query for API state management

**Checkpoint**: Login mutation compiles, Redux DevTools shows API slice

- [x] T017 Install RTK dependencies: `npm install @reduxjs/toolkit react-redux` in `phase2/frontend/`
- [x] T018 Create TypeScript types in `phase2/frontend/src/types/auth.ts` (LoginRequest, RegisterRequest, AuthResponse)
- [x] T019 [P] Create TypeScript types in `phase2/frontend/src/types/task.ts` (Task, TaskCreate, TaskUpdate, PaginatedResponse, TaskQueryParams)
- [x] T020 Create base API with auth header injection in `phase2/frontend/src/services/api.ts`
- [x] T021 Add 401 response handler (baseQueryWithReauth) to clear token and redirect in `phase2/frontend/src/services/api.ts`
- [x] T022 Create auth API endpoints (login, register mutations) in `phase2/frontend/src/services/authApi.ts`
- [x] T023 [P] Create task API endpoints (getTasks, createTask, updateTask, deleteTask) in `phase2/frontend/src/services/taskApi.ts`
- [x] T024 Create Redux store configuration with RTK Query middleware in `phase2/frontend/src/lib/store.ts`
- [x] T025 Wrap App with Redux Provider in `phase2/frontend/src/main.tsx`
- [x] T026 Verify TypeScript compiles: `npx tsc --noEmit` passes

**Deliverables**:
- RTK Query base API with auth header injection
- Auth endpoints: login, register mutations
- Task endpoints: CRUD operations with cache invalidation
- Redux store with proper middleware

---

## Phase 4: Zustand UI Store + Theme

**Purpose**: Lightweight UI state management with theme persistence

**Checkpoint**: Zustand store compiles, theme state accessible in App.tsx

- [x] T027 Install Zustand: `npm install zustand` in `phase2/frontend/`
- [x] T028 Create UI store with theme state (light/dark/system) in `phase2/frontend/src/stores/uiStore.ts`
- [x] T029 Add persist middleware to save theme to localStorage in `phase2/frontend/src/stores/uiStore.ts`
- [x] T030 Create `useTheme` hook for theme application in `phase2/frontend/src/hooks/useTheme.ts`
- [x] T031 Add theme effect to apply `dark` class to document.documentElement in `phase2/frontend/src/hooks/useTheme.ts`
- [x] T032 Verify Zustand store accessible in `App.tsx`: import and log theme value

**Deliverables**:
- Zustand store with theme state
- Theme persistence in localStorage
- `useTheme` hook for dark mode application

---

## Phase 5: Vite Proxy + Backend Connection

**Purpose**: Configure Vite dev server proxy to backend API

**Checkpoint**: `curl localhost:5173/api/auth/login -X POST` → backend response (401 OK)

- [x] T033 Update `vite.config.ts` with proxy configuration: `/api` → `http://localhost:8000` in `phase2/frontend/`
- [x] T034 Add `rewrite` rule to strip `/api` prefix in proxy config in `phase2/frontend/vite.config.ts`
- [x] T035 Add path alias resolution to `vite.config.ts`: `'@': path.resolve(__dirname, './src')` in `phase2/frontend/`
- [x] T036 Restart dev server and verify proxy with curl test (requires backend running)

**Deliverables**:
- Vite proxy forwarding `/api/*` to backend
- Path alias `@/` working in imports

---

## Phase 6: React Router + ProtectedRoute

**Purpose**: Client-side routing with authentication guards

**Checkpoint**: Navigate to `/` without token → redirects to `/login`

- [x] T037 Install React Router: `npm install react-router-dom` in `phase2/frontend/`
- [x] T038 Create route constants (ROUTES object) in `phase2/frontend/src/routes/index.tsx`
- [x] T039 Create `useAuth` hook with isAuthenticated check in `phase2/frontend/src/hooks/useAuth.ts`
- [x] T040 Create ProtectedRoute component with redirect logic in `phase2/frontend/src/routes/ProtectedRoute.tsx`
- [x] T041 Create placeholder LoginPage in `phase2/frontend/src/pages/LoginPage.tsx`
- [x] T042 [P] Create placeholder RegisterPage in `phase2/frontend/src/pages/RegisterPage.tsx`
- [x] T043 [P] Create placeholder TasksPage in `phase2/frontend/src/pages/TasksPage.tsx`
- [x] T044 Set up BrowserRouter and Routes in `phase2/frontend/src/App.tsx`
- [x] T045 Verify protected route redirect: clear localStorage, navigate to `/` → redirects to `/login`

**Deliverables**:
- React Router v6 configured
- ProtectedRoute component with JWT check
- Placeholder pages for auth and tasks

---

## Phase 7: Basic Layout + Auth Pages

**Purpose**: Application shell with styled auth forms

**Checkpoint**: `localhost:5173/login` → styled login form renders

- [x] T046 Create Layout component with children wrapper in `phase2/frontend/src/components/layout/Layout.tsx`
- [x] T047 Create Header component with navigation and theme toggle slot in `phase2/frontend/src/components/layout/Header.tsx`
- [x] T048 Create ThemeToggle component using shadcn Button + Lucide icons in `phase2/frontend/src/components/layout/ThemeToggle.tsx`
- [x] T049 Update LoginPage with shadcn/ui form (email, password, submit button) in `phase2/frontend/src/pages/LoginPage.tsx`
- [x] T050 [P] Update RegisterPage with shadcn/ui form (email, password, confirm, submit) in `phase2/frontend/src/pages/RegisterPage.tsx`
- [x] T051 Integrate Layout into App.tsx wrapping routes
- [x] T052 Verify login page renders with styled form at localhost:5173/login

**Deliverables**:
- Layout component with Header
- ThemeToggle component
- Styled auth forms using shadcn/ui

---

## Phase 8: Final Polish + Build Verification

**Purpose**: TypeScript verification and production build check

**Checkpoint**: `npm run build` → 0 errors, `npx tsc --noEmit` passes

- [ ] T053 Create `.gitignore` with node_modules, dist, .env.local in `phase3/frontend/`
- [ ] T054 Review and fix any TypeScript errors: `npx tsc --noEmit`
- [ ] T055 Run production build: `npm run build` → verify dist/ created
- [ ] T056 Verify dark mode toggle works: click toggle, theme switches, persists on reload
- [ ] T057 Final manual verification: all 10 acceptance tests from spec.md Section 4.1

**Deliverables**:
- Zero TypeScript errors
- Production build successful
- Dark mode functional
- All acceptance criteria verified

---

## Dependencies & Execution Order

### Phase Dependencies

```text
Phase 1: Project Init ─────────────────────┐
                                           │
                                           ▼
Phase 2: Tailwind + shadcn/ui ─────────────┐
                                           │
                                           ▼
Phase 3: RTK Query API ────────────────────┐
         │                                 │
         ▼                                 │
Phase 4: Zustand + Theme ◄─────────────────┘
         │
         ▼
Phase 5: Vite Proxy ───────────────────────┐
                                           │
                                           ▼
Phase 6: Router + ProtectedRoute ──────────┐
                                           │
                                           ▼
Phase 7: Layout + Auth Pages ──────────────┐
                                           │
                                           ▼
Phase 8: Polish + Build
```

### Within Each Phase

- T001-T005: Must be sequential (project init)
- T006-T016: T006-T011 sequential, T012-T014 parallel (different shadcn components)
- T017-T026: T017-T021 sequential, T022-T023 parallel (different API slices), T024-T026 sequential
- T027-T032: Sequential (Zustand depends on previous)
- T033-T036: Sequential (proxy config)
- T037-T045: T037-T040 sequential, T041-T043 parallel (different pages), T044-T045 sequential
- T046-T052: T046-T048 sequential, T049-T050 parallel (different pages), T051-T052 sequential
- T053-T057: Sequential (final verification)

### Parallel Opportunities

```bash
# Phase 2 (after T011):
T012: Install card component    [P]
T013: Install input component   [P]
T014: Install label component   [P]

# Phase 3 (after T021):
T018: Create auth types
T019: Create task types         [P]
T022: Create auth API
T023: Create task API           [P]

# Phase 6 (after T040):
T041: Create LoginPage
T042: Create RegisterPage       [P]
T043: Create TasksPage          [P]

# Phase 7 (after T048):
T049: Style LoginPage
T050: Style RegisterPage        [P]
```

---

## Implementation Strategy

### Sequential Execution (Recommended)

1. Complete Phase 1 → Checkpoint: dev server runs
2. Complete Phase 2 → Checkpoint: Button renders
3. Complete Phase 3 → Checkpoint: TypeScript compiles
4. Complete Phase 4 → Checkpoint: Zustand accessible
5. Complete Phase 5 → Checkpoint: proxy works
6. Complete Phase 6 → Checkpoint: redirect works
7. Complete Phase 7 → Checkpoint: login page styled
8. Complete Phase 8 → **DONE**

### MVP Validation Points

- **After Phase 5**: Dev environment complete, can connect to backend
- **After Phase 6**: Auth flow skeleton working
- **After Phase 8**: Full scaffolding complete, ready for Part 2

---

## Files Created Summary

| File | Phase | Tasks |
|------|-------|-------|
| `package.json` | 1 | T001 |
| `vite.config.ts` | 1, 5 | T001, T033-T035 |
| `tsconfig.json` | 1 | T004 |
| `.env.local` | 1 | T002 |
| `tailwind.config.ts` | 2 | T007-T008 |
| `src/index.css` | 2 | T009 |
| `src/lib/utils.ts` | 2 | T010 (auto) |
| `src/components/ui/*` | 2 | T011-T014 |
| `src/types/auth.ts` | 3 | T018 |
| `src/types/task.ts` | 3 | T019 |
| `src/services/api.ts` | 3 | T020-T021 |
| `src/services/authApi.ts` | 3 | T022 |
| `src/services/taskApi.ts` | 3 | T023 |
| `src/lib/store.ts` | 3 | T024 |
| `src/stores/uiStore.ts` | 4 | T028-T029 |
| `src/hooks/useTheme.ts` | 4 | T030-T031 |
| `src/hooks/useAuth.ts` | 6 | T039 |
| `src/routes/index.tsx` | 6 | T038 |
| `src/routes/ProtectedRoute.tsx` | 6 | T040 |
| `src/pages/LoginPage.tsx` | 6, 7 | T041, T049 |
| `src/pages/RegisterPage.tsx` | 6, 7 | T042, T050 |
| `src/pages/TasksPage.tsx` | 6 | T043 |
| `src/components/layout/Layout.tsx` | 7 | T046 |
| `src/components/layout/Header.tsx` | 7 | T047 |
| `src/components/layout/ThemeToggle.tsx` | 7 | T048 |

**Total**: 57 tasks, ~25 files

---

## Notes

- [P] tasks = different files, no dependencies
- Phases must complete in order (each depends on previous)
- Checkpoints verify each phase before proceeding
- No tests in this phase (scaffolding only)
- Commit after each phase completion
- Backend must be running for Phase 5 proxy verification
